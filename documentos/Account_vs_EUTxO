# DiferenÃ§a entre Modelo de Contas e EUTxO

Uma das principais distinÃ§Ãµes entre blockchains estÃ¡ no modelo de **representaÃ§Ã£o de estado e execuÃ§Ã£o de transaÃ§Ãµes**. Os dois principais sÃ£o:

- **Modelo de Contas (Account Model)**
- **Modelo EUTxO (Extended Unspent Transaction Output)**

---

## ğŸ“˜ Modelo de Contas (Account Model)

**Usado em:** Ethereum, BNB Chain, Solana (com variaÃ§Ãµes)

### ğŸ› ï¸ Funcionamento

- Cada usuÃ¡rio tem uma **conta com saldo**.
- TransaÃ§Ãµes atualizam diretamente os **saldos das contas**.
- Toda a blockchain mantÃ©m um **mapa global de contas**.
- Um contrato pode **chamar diretamente outro contrato** e alterar seu estado.

### âœ… Vantagens

- FÃ¡cil de entender e programar.
- ExecuÃ§Ã£o sequencial facilita chamadas entre contratos.
- Bom para DeFi e aplicaÃ§Ãµes com lÃ³gica encadeada.

### âŒ Desvantagens

- Menor previsibilidade: efeitos colaterais sÃ£o comuns.
- Maior risco de **condiÃ§Ãµes de corrida** e vulnerabilidades como reentrÃ¢ncia.

---

## ğŸ§± Modelo EUTxO (Extended UTxO)

**Usado em:** Cardano, Ergo

### ğŸ› ï¸ Funcionamento

- O estado Ã© um **conjunto de UTxOs** (saÃ­das de transaÃ§Ãµes nÃ£o gastas).
- TransaÃ§Ãµes **consomem UTxOs e criam novos**.
- Cada UTxO pode conter **valor, dados (`datum`) e um script**.
- A lÃ³gica do contrato acontece na **validaÃ§Ã£o da transaÃ§Ã£o** (nÃ£o dentro do contrato).

### âœ… Vantagens

- Alta previsibilidade: contratos sÃ£o **sem efeitos colaterais**.
- Ideal para **verificaÃ§Ã£o formal** e seguranÃ§a.
- Permite fÃ¡cil paralelizaÃ§Ã£o.

### âŒ Desvantagens

- ProgramaÃ§Ã£o mais complexa.
- DifÃ­cil modelar interaÃ§Ãµes dinÃ¢micas entre contratos em uma Ãºnica transaÃ§Ã£o.

---

## âš–ï¸ ComparaÃ§Ã£o Lado a Lado

| Aspecto                        | Modelo de Contas                        | Modelo EUTxO                            |
|-------------------------------|-----------------------------------------|-----------------------------------------|
| RepresentaÃ§Ã£o de estado       | Mapa de contas                          | Conjunto de UTxOs                       |
| AtualizaÃ§Ã£o de estado         | ModificaÃ§Ã£o direta                      | Consome e cria UTxOs                    |
| InteraÃ§Ã£o entre contratos     | Direta (chamada entre contratos)        | Indireta (composiÃ§Ã£o de UTxOs)          |
| Efeitos colaterais            | PossÃ­veis                               | NÃ£o existem                             |
| Previsibilidade               | Menor                                   | Alta                                    |
| Facilidade de composiÃ§Ã£o      | Alta                                    | Exige estrutura                          |
| Exemplo de uso                | Ethereum                                | Cardano                                 |

---

## ğŸ“¦ Exemplo Comparativo de CÃ³digo

### ğŸ§¾ Modelo de Contas (Solidity - Ethereum)

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

contract MeuToken {
    mapping(address => uint256) public saldos;

    constructor() {
        saldos[msg.sender] = 1000;
    }

    function transferir(address destinatario, uint256 valor) public {
        require(saldos[msg.sender] >= valor, "Saldo insuficiente");
        saldos[msg.sender] -= valor;
        saldos[destinatario] += valor;
    }
}
```

- Saldo armazenado num `mapping`.
- Estado atualizado diretamente dentro da funÃ§Ã£o `transferir`.

---

### ğŸ§± Modelo EUTxO (Plutus - Cardano, pseudo-cÃ³digo)

```haskell
data AÃ§Ã£o = Transferir PubKeyHash Integer

validate :: AÃ§Ã£o -> ScriptContext -> Bool
validate (Transferir destino valor) ctx =
    traceIfFalse "Destino invÃ¡lido" $
      valorEnviadoPara ctx destino >= valor
```

- A transaÃ§Ã£o **consome um UTxO** com script.
- O script **valida a transaÃ§Ã£o** sem alterar estado global.
- O novo estado surge da **criaÃ§Ã£o de novos UTxOs**.

---

## ğŸ“Œ Resumo Visual

```plaintext
Modelo de Contas (Ethereum)
[Conta A: 100] --> chamada â†’ contrato â†’ atualiza mapeamento â†’ [Conta B: 100]

Modelo EUTxO (Cardano)
[UTxO A: 100] --> transaÃ§Ã£o vÃ¡lida â†’ consome A + cria [UTxO B: 100]
```
